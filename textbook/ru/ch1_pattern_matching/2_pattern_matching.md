Сопоставление с образцом
========================

## Конструкция и извлечение данных

### Конструкция объектов
В предыдущем разделе мы рассматривали возможность конструирования
списка путем использования оператора cons `::` и кортежей
традиционным для них образом. Мы конструировали массивы и списки:

    val myArray = Array(2100, 2099)

    val myList = List(1,2,3,4,5,6,7,8,9)

Выглядит это порой загадочно: мы не использовали слово “new” и явным
образом не вызывали какой-либо метод. На самом деле, для каждого
из типов существует объект-компаньон, в котором определен метод “apply”.
Этот метод определен так же для функций (в Scala функции также
являются объектами).

    // равноценно коду выше
    val myArray = Array.apply(2100, 2099)

Более подробно о методе `apply` написано на [Twitter Scala School][apply]

### Извлечение данных из объектов
Аналогично методу `apply`, существуют методы `unapply` и `unapplySeq`.
Подробно об экстракторах, вы можете прочитать [здесь][unapply].


## Сопоставление с образцом
Сопоставление с образцом (pattern matching) операция характерная
преимущественно для функциональных языков. Она позволяет извлекать
компоненты составного объекта, обладая информацией о его структуре.

Обязательно посмотрите это [видео][video-tutorial]. Здесь подробно
рассказывается, как выполняется конструирование структур данных,
извлечение из них данных, об операции сопоставления с образцом.
Еще рекомендуем ознакомиться с [руководством][pm-tutor].

Как вы уже, наверное, заметили, в предыдущем разделе оператор связывания
позволяет также сопоставлять с образцом.

Scala имеет синтаксический сахар для сопоставления с образцом внутри
функций:

    // до
    list.filter(item => item match {
      case phone: Cellphone => true
      case _ => false
    }

    // после
    list.filter {
      case phone: Cellphone => true
      case _ => false
    }

Вы можете использовать сопоставление с образцом в теле любой функции,
принимающей один аргумент. Scala скомпилирует операцию в
PartialFunction, которая, в свою очередь, является сабклассом для Function1.

Вы также можете использовать сопоставление с образцом для сопоставления
регулярных выражений. Больше информации [здесь][pm-regex].

[video-tutorial]: https://www.youtube.com/watch?v=1vxIRkYZfmc

[apply]: https://twitter.github.io/scala_school/basics2.html#apply
[unapply]: http://docs.scala-lang.org/tutorials/tour/extractor-objects.html
[pm-tutor]: http://docs.scala-lang.org/tutorials/tour/pattern-matching
[pm-regex]: https://www.scala-lang.org/api/2.12.x/scala/util/matching/Regex.html

